<!DOCTYPE html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]--><!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8"><![endif]--><!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9"><![endif]--><!--[if gt IE 8]><!--><html class="no-js">
<!--<![endif]--> <head> <meta charset="UTF-8"> <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"> <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> <title>La crittografia moderna spiegata a mia mamma, parte 3 – Alessandro Pagiaro</title> <meta name="description" content="Studente di Informatica presso l'Università di Pisa. Scout a tempo perso."> <meta name="keywords" content="crittografia, RSA, firma digitale"> <!-- Twitter Cards --> <meta name="twitter:card" content="summary_large_image"> <meta name="twitter:image" content="http://www.androidworld.it/wp-content/uploads/2015/03/crittografia-1280x720.jpg"> <meta name="twitter:title" content="La crittografia moderna spiegata a mia mamma, parte 3 "> <meta name="twitter:description" content="La firma digitale"> <meta name="twitter:site" content="@alessandro308"> <meta name="twitter:creator" content="@alessandro308"> <!-- Open Graph --> <meta property="og:locale" content="it_IT"> <meta property="og:type" content="article"> <meta property="og:title" content="La crittografia moderna spiegata a mia mamma, parte 3 "> <meta property="og:description" content="La firma digitale"> <meta property="og:url" content="https://apagiaro.it/intro-crittografia-3/"> <meta property="og:site_name" content="Alessandro Pagiaro"> <meta property="og:image" content="https://apagiaro.it/assets/img/me.png"> <link rel="canonical" href="https://apagiaro.it/intro-crittografia-3/"> <link href="https://apagiaro.it/feed.xml" type="application/atom+xml" rel="alternate" title="Alessandro Pagiaro Feed"> <!-- Handheld --> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- CSS --> <link rel="stylesheet" href="https://apagiaro.it/assets/css/main.css"> <!-- JS --> <script src="https://apagiaro.it/assets/js/modernizr-3.3.1.custom.min.js"></script> <!-- Favicons --> <link rel="apple-touch-icon" href="https://apagiaro.it/assets/img/favicons/apple-icon-precomposed.png"> <link rel="apple-touch-icon" sizes="72x72" href="https://apagiaro.it/assets/img/favicons/apple-icon-72x72.png"> <link rel="apple-touch-icon" sizes="114x114" href="https://apagiaro.it/assets/img/favicons/apple-icon-114x114.png"> <link rel="apple-touch-icon" sizes="144x144" href="https://apagiaro.it/assets/img/favicons/apple-icon-144x144.png"> <link rel="shortcut icon" type="image/png" href="https://apagiaro.it/favicon.png"> <link rel="shortcut icon" href="https://apagiaro.it/favicon.ico"> <!-- Background Image --> <!-- Post Feature Image --> <style type="text/css">.feature {background-image:url(http://www.androidworld.it/wp-content/uploads/2015/03/crittografia-1280x720.jpg);}</style> </head> <body> <nav id="dl-menu" class="dl-menuwrapper" role="navigation"> <button class="dl-trigger">Open Menu</button> <ul class="dl-menu"> <li><a href="https://apagiaro.it/">Home</a></li> <li> <a href="#">About</a> <ul class="dl-submenu"> <li> <img src="https://apagiaro.it/assets/img/me.png" alt="Alessandro Pagiaro photo" class="author-photo"> <h4>Alessandro Pagiaro</h4> <p>Studente di Informatica presso l'Università di Pisa. Scout a tempo perso.</p> </li> <li><a href="https://apagiaro.it/about/"><span class="btn btn-inverse">Learn More</span></a></li> <li> <a href="mailto:alessandropagiaro@gmail.com" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-envelope-square"></i> Email</a> </li> <li> <a href="http://twitter.com/alessandro308" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-twitter-square"></i> Twitter</a> </li> <li> <a href="http://linkedin.com/in/alessandro-pagiaro-9a5a5496" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-linkedin-square"></i> LinkedIn</a> </li> <li> <a href="http://github.com/alessandro308" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-github"></i> Github</a> </li> </ul>
<!-- /.dl-submenu --> </li> <li> <a href="#">Posts</a> <ul class="dl-submenu"> <li><a href="https://apagiaro.it/posts/">All Posts</a></li> <li><a href="https://apagiaro.it/tags/">All Tags</a></li> </ul> </li> <li><a href="https://apagiaro.it/projects/">Projects</a></li> </ul>
<!-- /.dl-menu --> </nav><!-- /.dl-menuwrapper --> <!-- Header --> <header class="header" role="banner"> <div class="wrapper animated fadeIn"> <div class="content"> <div class="post-title "> <h1>La crittografia moderna spiegata a mia mamma, parte 3 </h1> <h4>26 Aug 2017</h4> <p class="reading-time"> <i class="fa fa-clock-o"></i> Reading time ~6 minutes </p>
<!-- /.entry-reading-time --> <a class="btn zoombtn" href="https://apagiaro.it/posts/"> <i class="fa fa-chevron-left"></i> </a> </div> <p>Dopo aver visto nella <a href="https://apagiaro.it/intro-crittografia">prima parte</a> come scambiarsi una chiave senza doverla comunicare in chiaro, abbiamo visto nella <a href="https://apagiaro.it/intro-crittografia-2">seconda parte</a> come è possibile scambiarsi messaggi cifrati senza neanche doversi scambiare una chiave, tramite l’uso dell’RSA.</p> <p>Lo scopo di oggi è vedere come sfruttare l’RSA, o qualsiasi altro algoritmo di cifratura asimmetrico, per verificare l’identità di un mittente come se lui lo avesse firmato.</p> <p><img src="http://www.ordineingegneri.ancona.it/sites/default/files/firmadigitale.jpg" alt="firma"></p> <h1 id="la-firma-digitale">La firma digitale</h1> <p>Bob mi manda un messaggio: “Il pagamento puoi effettuarlo al seguente IBAN: IT000….001”. Ed ecco il problema, come verifico che quel messaggio sia stato spedito effettivamente da Bob e non sia stato intercettato da qualcuno che ha prontamente modificato l’IBAN con il suo?</p> <p>Di certo non è cifrando il messaggio che risolvo la cosa poichè cifrando qualcosa lui è in grado di verificare che solo io possa leggere il messaggio ma io non sono in grado di verificare chi abbia spedito il messaggio.</p> <h3 id="recap">Recap</h3> <p>Come avevamo già visto, ogni utente in un sistema di crittografia asimmetrica dispone di due chiavi: la <em>chiave pubblica</em> e la <em>chiave privata</em>. La caratteristica è che la chiave pubblica può essere liberamente comunicata a chiunque e la chiave privata invece rimane segreta. Inoltre, il legame tra queste due chiavi è che, applicando prima una e poi l’altra al messaggio, il testo viene cifrato e decifrato, potremmo dire che sono una l’inverso dell’altra. In formula, sia <em>C(m, k)</em> l’algoritmo usato, <em>m</em> il messaggio e <em>k</em> la chiave usata:</p> <p>\[ m = C(C(m, k_{pu}), k_{pr}) = C(C(m, k_{pr}), k_{pu})\]</p> <h2 id="come-firmare-un-messaggio">Come firmare un messaggio</h2> <p>Per firmare un messaggio dobbiamo quindi trovare un modo per sfruttare cifrare il messaggio in un modo che solo il reale mittente potrebbe fare.</p> <p>La cosa che potrebbe certificare il mittente di essere Bob è il dimostrare di conoscere la sua chiave privata, \( k_{pr-B}\). Certo, Bob non può però rivelare al mondo (altrimenti non sarebbe più privata) questo dato e quindi escogita un modo che trovo geniale: usa l’algoritmo di cifratura al contrario, invece che cifrare con la chiave pubblica del ricevente, cifra con la sua chiave privata. Chiaramente tutti saranno in grado di “decifrare” il messaggio, basterà applicare la chiave pubblica di Bob. Il nostro scopo infatti, vi ricordo, non è cifrare il messaggio ma fare in modo di verificare l’identità del mittente.</p> <p>Cosa comporta questo? Che il messaggio è cifrato con una chiave che solo Bob può conoscere e di cui tutti sono in grado di verificarne la correttezza poichè tutti conoscono la <em>chiave pubblica</em> di Bob e quindi, dato che una è <em>“inverso”</em> dell’altra, è possibile effettuare \( m = C(C(m, k_{pr}), k_{pu}) \).</p> <h3 id="abbreviare-il-messaggio-hashing">Abbreviare il messaggio: hashing</h3> <p>Certo che però cifrare un intero messaggio che spediremo <em>anche</em> in chiaro (il nostro scopo ora infatti non è di spedire il messaggi cifrato, avevamo già visto come fare per quello, ma di spedire un messaggio e autenticarlo) vuol dire raddoppiare la quantità di dati da spedire e calcolare il messaggio cifrato su una grande quantità di dati inutilmente.</p> <p>Se poi ci mettiamo anche il fatto che gli algoritmi di cifratura asimmetrica sono molto più complessi da un punto di vista computazionale dei classici algoritmi a cifratura simmetrica, per fare un esempio una password lunga 2048 bits usata in un cifrario RSA viene, da un punto di vista di sicurezza, comparata ad una lunga solo 128 bits in un cifrario AES (uno dei più usati cifrari simmetrici in circolazione)… ecco che tutti risulta inefficiente!</p> <p>Come aggirare il problema? Non viene di solito cifrato il messagio completo ma una sua sintesi, l’output cioè di una funzione <em>hash</em>, <em>h(m)</em>.</p> <h4 id="cosa-è-una-funzione-hash">Cosa è una funzione hash?</h4> <p>Ecco, questa cosa è forse un po’ tecnica e si discosta un po’ dal <em>mood</em> di queste pagine che volevano essere una cosa generale da far capire a tutti. Tuttavia provo a lasciare le cose più semplici possibili, decidete voi se lo sono abbastanza da leggerle.</p> <p>Una funzione hash è una funzione che, dato in input un qualsiasi messaggio (stringa di bits di qualsiasi lunghezza), restituisce in output una serie di bits di lunghezza fissa. Chiaramente questa cosa comporta che vi sono moltissimi (leggasi infiniti) messaggi che possono corrispondere ad uno stesso <em>hash</em>, cioè: \[ \exists i, j \ s.t.\ h(i)=h(j) \]</p> <p>Tale affermazione è abbastanza intuitiva, infiniti inputs, finiti possibili outputs, infiniti inputs collideranno per il <em>pigeonhole principle</em>.</p> <p>E allora? E allora si cerca di usare funzioni <em>hash</em> abbastanza casuali tali che due input simili non presentino lo stesso <em>hash</em> o, ancora meglio, questo <em>hash</em> sia molto differente. Facendo un esempio, potremmo usare una famosa funzione hash, la SHA-256:</p> <div class="highlighter-rouge"><pre class="highlight"><code>sha256("ciao a tutti") = d866234a1931e169288df6353923629cb4297c299da5fdfbe00b7fa42861eb98
sha256("ciao a tutte") = 41a0afdbed24669aad1da115f0e8577277a41ec351ac6a6c7169a8e6f28b7084
</code></pre></div> <p>Un’altra caratteristica di queste funzioni, per la loro natura dimensionale (infiniti input, finiti output), è che non sono invertibili. Se vi dessi quindi l’output <code class="highlighter-rouge">d866234a1931e169288df6353923629cb4297c299da5fdfbe00b7fa42861eb98</code> non sareste in grado di capire quale input lo ha generato (avreste infiniti input tra cui scegliere).</p> <h2 id="come-funziona-la-firma">Come funziona la firma</h2> <p>L’idea, per tornare ai nostri scopi, è di per sè molto semplice: mandare due valori, il messaggio in chiaro e l’hash del messaggio cifrato con la chiave privata</p> <p>\[ &lt;m, C(h(m), K_{pr-B})&gt; \]</p> <p>Un eventuale ricevente non deve far nient’altro che prendere la <em>chiave pubblica</em> di Bob, e applicarla al secondo componente spedito. Se il procedimento è andato a buon fine il risultato sarà \( &lt;m, h(m)&gt; \). Basterà quindi calcolare l’hash di <em>m</em> e confrontarlo con il risultato della decifratura.</p> <p><img src="https://apagiaro.it/assets/img/post-image/facebook.png" alt="facebook certificato"></p> <h1 id="il-problema-della-verifica-della-chiave-pubblica">Il problema della verifica della chiave pubblica</h1> <p>Si introduce, in tutto questo ragionamento, un problema che, quando abbiamo introdotto i cifrari asimmetrici, avevamo ignorato.</p> <center><b>Come verifico che la chiave pubblica di Bob sia realmente <i>xyz</i> e non sia, in realtà <i>abc</i>?</b></center> <p>In altre parole, come verifico che nessuno abbia sostituito la pagina dove Bob ha scritto la sua chiave pubblica con una pagina contenente la sua per validare lui un “finto” messaggio?</p> <p>Chiaramente come possiamo immaginare si è trovata una soluzione anche a questo e viene usata in maniera consistente ogni qual volta navighiamo in <em>https</em> sul web. Sono stati creati delle <em>certification authority</em> che si fanno carico di certificare la validità delle varie chiavi pubbliche. Se voglio che tutti siano sicuri che la mia chiave pubblica è \(k_{mia}\), me la faccio certificare da una <em>certification authority</em> che si salverà \(k_{mia}\) e la comunicherà corretta a chiunque la richieda.</p> <p>A questo punto si torna alla domanda con cui avevamo aperto questa serie di articoli sulla crittografia, <strong>chi certifica la Certification Authority</strong>?</p> <p>Beh, in tal caso diciamo che si autocertificano, o meglio, per capirlo bisogna capire in che scenario si utilizzano. Quando navighiamo noi usiamo un browser che si connetterà in maniera cifrata a vari server verificando l’identità di ognuno di questi leggendo la <em>chiave pubblica</em> dichiarata (la questione è un po’ più complicata ma cerchiamo di lasciarla più semplice possibile). A questo punto, si connette alla <em>certification authority</em> per controllare la validità. Questa connessione che effettua avviene con il metodo di cifratura asimmetrica visto nella <a href="https://apagiaro.it/intro-crittografia-2">seconda parte</a> e, la chiave pubblica della <em>c. a.</em>, il browser la conosce perchè ce l’ha salvata nel suo database locale. E chi l’ha inserita in quel database? Diciamo che il programmatore potrebbe aver inserito le principale <em>c.a.</em> e quando scaricate il browser ve le ritrovate già lì pronte, e poi a cascata tutte le altre.</p> <p>Per vedere tutte queste cose, sui siti che visitate, basta cliccare sul lucchetto posto, solitamente, alla sinistra dell’url nella barra degli indirizzo. Vi dovreste ritrovare una schermata simile a quella mostrata nell’immagine qui sopra con tutti i dati di cui abbiamo parlato oggi che ora, spero, sarete in grado di capire un po’ meglio.</p> <div class="entry-meta"> <br> <hr> <span class="entry-tags"><a href="https://apagiaro.it/tags/#crittografia" title="Pages tagged crittografia" class="tag"><span class="term">crittografia</span></a><a href="https://apagiaro.it/tags/#RSA" title="Pages tagged RSA" class="tag"><span class="term">RSA</span></a><a href="https://apagiaro.it/tags/#firma%20digitale" title="Pages tagged firma digitale" class="tag"><span class="term">firma digitale</span></a></span> <span class="social-share"> <a href="https://www.facebook.com/sharer/sharer.php?u=https://apagiaro.it/intro-crittografia-3/" title="Share on Facebook" class="tag"> <span class="term"><i class="fa fa-facebook-square"></i> Share</span> </a> <a href="https://twitter.com/intent/tweet?text=https://apagiaro.it/intro-crittografia-3/" title="Share on Twitter" class="tag"> <span class="term"><i class="fa fa-twitter-square"></i> Tweet</span> </a> <a href="https://plus.google.com/share?url=https://apagiaro.it/intro-crittografia-3/" title="Share on Google+" class="tag"> <span class="term"><i class="fa fa-google-plus-square"></i> +1</span> </a> </span> <div style="clear:both"></div> </div> </div> </div> <section id="disqus_thread" class="animated fadeInUp"></section><!-- /#disqus_thread --> </header> <!-- JS --> <script src="https://apagiaro.it/assets/js/jquery-1.12.0.min.js"></script> <script src="https://apagiaro.it/assets/js/jquery.dlmenu.min.js"></script> <script src="https://apagiaro.it/assets/js/jquery.goup.min.js"></script> <script src="https://apagiaro.it/assets/js/jquery.magnific-popup.min.js"></script> <script src="https://apagiaro.it/assets/js/jquery.fitvid.min.js"></script> <script src="https://apagiaro.it/assets/js/scripts.js"></script> <!-- Asynchronous Google Analytics snippet --> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-105829132-1', 'auto'); ga('require', 'linkid', 'linkid.js'); ga('send', 'pageview'); </script> <script type="text/javascript"> var disqus_shortname = 'alessandro308'; (function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true; dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq); })(); (function () { var s = document.createElement('script'); s.async = true; s.type = 'text/javascript'; s.src = '//' + disqus_shortname + '.disqus.com/count.js'; (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s); }()); </script> <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript> <!-- MathJax --> <script async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> </body> </html>
